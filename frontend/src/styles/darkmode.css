/* Dark Mode Global Styles */

/* Apply dark mode when class is added to html element */
html.dark-mode,
.dark-mode {
  /* Base colors */
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --bg-tertiary: #404040;
  
  --text-primary: #ffffff;
  --text-secondary: #e0e0e0;
  --text-tertiary: #a0a0a0;
  
  --border-color: #404040;
  
  /* Override body background */
  background-color: #1a1a1a !important;
}

/* Force dark mode on ALL elements with maximum specificity */
html.dark-mode,
html.dark-mode body,
html.dark-mode #root,
html.dark-mode main,
html.dark-mode div[class*="css-"],
html.dark-mode div[data-baseweb],
.dark-mode,
.dark-mode body,
.dark-mode #root,
.dark-mode main,
.dark-mode div[class*="css-"],
.dark-mode div[data-baseweb] {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Apply dark mode text color to all elements */
html.dark-mode *,
.dark-mode * {
  color: #ffffff !important;
}

/* Dark backgrounds for all divs and containers */
html.dark-mode div,
html.dark-mode section,
html.dark-mode article,
html.dark-mode aside,
html.dark-mode nav,
html.dark-mode header,
html.dark-mode footer,
.dark-mode div,
.dark-mode section,
.dark-mode article,
.dark-mode aside,
.dark-mode nav,
.dark-mode header,
.dark-mode footer {
  background-color: #1a1a1a !important;
}

/* Light mode (default) */
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #e5e7eb;
  
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-tertiary: #6b7280;
  
  --border-color: #e5e7eb;
}

/* Apply dark mode to Base Web components */
.dark-mode .baseui--toast {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

.dark-mode .baseui--modal {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

.dark-mode .baseui--button {
  color: var(--text-primary);
}

.dark-mode .baseui--input input,
.dark-mode .baseui--textarea textarea {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

.dark-mode .baseui--popover__body {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

/* Leaflet map adjustments for dark mode */
.dark-mode .leaflet-container {
  background-color: #1a1a1a;
}

.dark-mode .leaflet-popup-content-wrapper,
.dark-mode .leaflet-popup-tip {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
}

.dark-mode .leaflet-control-layers,
.dark-mode .leaflet-bar {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
}

.dark-mode .leaflet-control-layers-expanded {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
}

/* Apply dark mode to main app container and all nested divs */
html.dark-mode > div,
html.dark-mode #root > div,
html.dark-mode #root div,
.dark-mode > div,
.dark-mode #root > div,
.dark-mode #root div {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Chat container specific */
html.dark-mode .chat-container,
html.dark-mode .message-container,
html.dark-mode .sidebar,
.dark-mode .chat-container,
.dark-mode .message-container,
.dark-mode .sidebar {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Dark mode for all Base Web styled components with maximum specificity */
html.dark-mode [data-baseweb],
html.dark-mode [class*="baseui"],
html.dark-mode div[class*="css-"],
.dark-mode [data-baseweb],
.dark-mode [class*="baseui"],
.dark-mode div[class*="css-"] {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Override Styletron generated styles */
html.dark-mode [class*="css-"][style],
.dark-mode [class*="css-"][style] {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Specific overrides for Base Web components that need background changes */
html.dark-mode [data-baseweb="block"],
html.dark-mode [data-baseweb="card"],
html.dark-mode [data-baseweb="layer"],
html.dark-mode [data-baseweb="popover"],
.dark-mode [data-baseweb="block"],
.dark-mode [data-baseweb="card"],
.dark-mode [data-baseweb="layer"],
.dark-mode [data-baseweb="popover"] {
  background-color: #2d2d2d !important;
  color: #ffffff !important;
}

/* Dark mode for cards and panels */
.dark-mode .baseui--card {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

/* Dark mode for tables */
.dark-mode table {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

.dark-mode th,
.dark-mode td {
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

/* Dark mode for code blocks */
.dark-mode pre,
.dark-mode code {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Dark mode for select dropdowns */
.dark-mode .baseui--select__control,
.dark-mode .baseui--select__dropdown {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

.dark-mode .baseui--select__option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

.dark-mode .baseui--select__option:hover {
  background-color: var(--bg-tertiary) !important;
}

/* Dark mode for tabs */
.dark-mode .baseui--tabs-tab {
  color: var(--text-secondary) !important;
}

.dark-mode .baseui--tabs-tab--active {
  color: var(--text-primary) !important;
}

/* Override inline styles with !important */
html.dark-mode [style*="background"],
html.dark-mode [style*="color"],
.dark-mode [style*="background"],
.dark-mode [style*="color"] {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/* Smooth transitions */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}